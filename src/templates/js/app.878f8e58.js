(function(t){function e(e){for(var s,r,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)r=n[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],s=!0,n=1;n<o.length;n++){var l=o[n];0!==a[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=o[0]))}return t}var s={},a={app:0},i=[];function r(e){if(s[e])return s[e].exports;var o=s[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=s,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(o,s,function(e){return t[e]}.bind(null,s));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"011c":function(t,e,o){"use strict";o.r(e);var s=o("237a");const{desktopCapturer:a,ipcRenderer:i,remote:r}=window.require("electron");o("b9fc");const n=r.app,l=window.require("path"),c=r.require("fs"),d=l.join(n.getPath("temp"),"./neoStaff_tmp"),u=l.join(d,"./ScreenShots");var p,v,f,m=600,h=[];const g=r.powerMonitor,k=window.require("log4js"),_=k.getLogger("neostaff");i.on("offline-data-flush",(function(t,e){console.log("offline-data-flush"),console.log("Temp folder: "+d),c.readdir(d,(t,e)=>{if(t)return _.debug("Unable to scan directory: "+JSON.stringify(t)),console.log("Unable to scan directory: "+t);e.forEach((function(t){let e=l.join(d,t);t.includes("projectsList_Offline")&&t.includes("offlineData")&&c.unlink(e,t=>{t&&console.error(t)})}))})})),i.on("offline-data-save",function(t,e){_.debug("offline-data-saving"),console.log("offline-data-saving"),console.log("Temp folder: "+d),"stopIdleReminder"!==e&&c.readdir(d,(t,o)=>{if(t)return _.debug("Unable to scan directory: "+JSON.stringify(t)),console.log("Unable to scan directory: "+t);o.forEach((function(t){if(console.log(t),"object"===typeof e){if(!t.includes("idleData_")&&!t.includes("offlineData_"))return}else if(!t.includes("idleData_")&&!t.includes("offlineData_"))return;let o=l.join(d,t);c.readFile(o,"utf8",(t,s)=>{if(t)return void console.log(s);let a=JSON.parse(s);"object"===typeof e&&(a["project_id"]=e.selectedProjectId,a["task_id"]=Object.keys(e.selectedTaskId).length>0?e.selectedTaskId:null),console.log("Offline data :"+a);var i=`accounts/${a["selectedAccount"]["id"]}/projects/${a["project_id"]}/activities`;a["task_id"]&&a["task_id"]>0&&(i=`accounts/${a["selectedAccount"]["id"]}/tasks/${a["task_id"]}/activities`),axios.post(i,a).then(t=>{let e=t.data.message;console.log(e),_.debug("Offline data save :"+o),c.unlink(o,t=>{t&&console.error(t)})}).catch(t=>{ErrorHandler.render(t)})})}))})}.bind(void 0)),i.on("reset-idlepop-timing",function(t,e){_.debug("reset-idlepop-timing"),console.log("reset-idlepop-timing"),m=600}.bind(void 0));class b{startIdlepopInterval(){let t=!1;f=setInterval(()=>{if(p=g.getSystemIdleState(180),v=g.getSystemIdleTime(),"idle"==p){if(v>=m){let e=m;i.send("popidle","true"),setTimeout(()=>{i.send("popidleTime",e/60),t=!0},1e3),m+=600}}else"resume"!=p&&"active"!=p||t&&(m=600)},6e4)}stopIdlepopInterval(){m=600,i.send("idle-window-send-data","keepIdleDataContinue"),clearInterval(f)}async render(t){try{let e=this;const o=[];h=[],a.getSources({types:["window","screen"]}).then(async s=>{for(let t of s)if("Entire Screen"===t.name||"Screen 1"===t.name||"Screen 2"===t.name)try{const s=await navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t.id,minWidth:1280,maxWidth:4e3,minHeight:720,maxHeight:4e3}}});o.push(e.createImage(s))}catch(a){console.log(a)}Promise.all(o).then(()=>{let e={from:this.fromTime(t.from),to:this.toTime(t.to),screenshots:h},o="./"+e.from+"_"+e.to;c.writeFile(l.join(u,o+".txt"),JSON.stringify(e),(function(t){t?console.log(t):_.info("The screenshots file has been stored in temp folder!!!")}))})})}catch(e){_.error("Unable to take screenshots data: "+JSON.stringify(e))}}handleStream(t){this.from=t.from,this.to=t.to,this.task_id=t.task_id,this.project_id=t.project_id,this.total_key_event=t.total_key_event,this.total_mouse_event=t.total_mouse_event,this.total_active_time=t.total_active_time,this.date=(new Date).toISOString().substr(0,10),this.idleModeActivated=t.idleModeActivated,this.selectedAccount=t.selectedAccount,this.total_activity_percentage=t.total_activity_percentage.toFixed(2),this.send()}createImage(t){return new Promise((e,o)=>{let s="image/png";var a=document.createElement("video");a.style.cssText="position:absolute;top:-10000px;left:-10000px;",a.onloadedmetadata=function(){a.style.height=this.videoHeight+"px",a.style.width=this.videoWidth+"px",a.play();var o=document.createElement("canvas");o.width=this.videoWidth,o.height=this.videoHeight;var i=o.getContext("2d");i.drawImage(a,0,0,o.width,o.height);let r=o.toDataURL(s);h.push(r),a.remove();try{t.getTracks()[0].stop(),console.log(t.getTracks())}catch(n){}e("Completed")},a.srcObject=t,document.body.appendChild(a)})}send(){try{c.readdir(u,(t,e)=>{if(t)return _.debug("Unable to scan directory: "+JSON.stringify(t)),console.log("Unable to scan directory: "+t);let o=this.fromTime(this.from),a=this.toTime(this.to),i=o+"_"+a;_.debug("Activities APIs calling, get screenshot file from temp :"+i);var r=this;e.forEach((function(t){if(t.includes(i)){var e=l.join(u,t);c.readFile(e,"utf8",(t,i)=>{if(t)return void _.error(t);c.unlink(e,t=>{t&&_.error(t)});let n=JSON.parse(i),u={from:o,to:a,second:0,date:r.date,keyboard_count:r.total_key_event,mouse_count:r.total_mouse_event,total_activity:r.total_active_time,total_activity_percentage:r.total_activity_percentage,screenshots:n["screenshots"]},f="./idleData_"+Date.now();s["default"].CheckNetworkStatus().then(t=>{if(r.idleModeActivated&&r.idleModeActivated||"idle"==p&&v>=180)u["task_id"]=r.task_id,u["project_id"]=r.project_id,u["selectedAccount"]=r.selectedAccount,c.writeFile(l.join(d,f+".txt"),JSON.stringify(u),(function(t){if(!t)return r.saveActivityNotify(),console.log("The file has been stored in temp folder!!!"),_.info("The file has been stored in temp folder!!!"),!1;console.log(t)}));else{var e=`accounts/${r.selectedAccount.id}/projects/${r.project_id}/activities`;r.task_id&&(e=`accounts/${r.selectedAccount.id}/tasks/${r.task_id}/activities`),axios.post(e,u).then(t=>{let e=t.data.message;return console.log(e),r.saveActivityNotify(),!1}).catch(t=>{ErrorHandler.render(t)})}},t=>{f="./offlineData_"+Date.now(),u["task_id"]=r.task_id,u["project_id"]=r.project_id,u["selectedAccount"]=r.selectedAccount,c.writeFile(l.join(d,f+".txt"),JSON.stringify(u),(function(t){if(!t)return r.saveActivityNotify(),console.log("The file has been stored in temp folder!!!"),!1;console.log(t)}))})})}}))})}catch(t){_.error("Unable to send data activities api: "+JSON.stringify(t))}}fromTime(t){var e=t.getHours(),o=t.getMinutes();let s=3600*e;var a=Number.isInteger(o/10);if(!a)while(!Number.isInteger(o/10))o-=1;return s+=60*o,s}toTime(t){var e=t.getHours(),o=t.getMinutes();let s=3600*e;var a=Number.isInteger(o/10);if(a)o+=10;else while(!Number.isInteger(o/10))o+=1;return s+=60*o,s}saveActivityNotify(){_.info("Activity saved successfully");var t=localStorage.getItem("appPreferences");if(t){let e=JSON.parse(t);if(e.startOrStopTimerNotification)if("granted"===Notification.permission){new Notification("NeoStaff",{body:"Screenshot captured!",icon:"http://timetracker.vnddev.com/app/public/favicon.ico"})}else"denied"!==Notification.permission&&Notification.requestPermission().then(t=>{})}}}e["default"]=new b},"190a":function(t,e,o){"use strict";o.r(e);var s=o("3d20"),a=o.n(s);const i=a.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,onOpen:t=>{t.addEventListener("mouseenter",a.a.stopTimer),t.addEventListener("mouseleave",a.a.resumeTimer)}}),r={simpleSuccess:t=>{i.fire({icon:"success",title:t})},simpleError:t=>{i.fire({icon:"error",title:t})},successAlert(t,e){a.a.fire({icon:"success",title:t,text:e})},errorAlert(t,e){a.a.fire({icon:"error",title:t,text:e})},sesionExpire(t){a.a.fire({icon:"info",title:t,showConfirmButton:!1})},async confirm(t){let e=await a.a.fire({title:t,icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"});return!!e.value}};e["default"]=r},"21b9":function(t,e,o){},"237a":function(t,e,o){"use strict";o.r(e);const{remote:s}=window.require("electron"),{parse:a}=(s.require("dns"),s.require("url"));let i="https://www.google.com/";class r{CheckNetworkStatus(){return new Promise((t,e)=>{const{protocol:o}=a(i),r="https:"===o?s.require("https"):s.require("http"),n=r.get(i,e=>{t(e)});n.on("error",t=>{e(t)})})}}e["default"]=new r},"406c":function(t,e,o){},4165:function(t,e,o){"use strict";o.r(e);class s{render(t){t.response?this.checkResponse(t.response):this.errorDefault()}errorDefault(){let t="Unknown error.",e="If any problem occurs contact us.";NotificationHandler.errorAlert(t,e)}checkResponse(t){console.log(t);let e=t.data,o=t.status,s=e.message,a="Error "+o;if(401==o&&"Unauthenticate."==s){let t="If session has expired, please log in again.";this.sesionExpire(t)}else e.errors&&this.errorMultiple(a,e.errors),s&&!e.errors&&this.showError(s)}showError(t){NotificationHandler.errorAlert("Error",t)}errorMultiple(t,e){let o="";$.each(e,(function(t,e){$.each(e,(function(t,e){o+="-"+e+"\n"}))})),NotificationHandler.errorAlert(t,o)}sesionExpire(t){NotificationHandler.sesionExpire(t),localStorage.removeItem("token"),localStorage.removeItem("logged"),localStorage.removeItem("isAdmin"),axios.defaults.headers.common["Authorization"]=null,setTimeout(()=>{window.location.reload()},2e3)}}e["default"]=new s},"49a4":function(t,e,o){"use strict";const s=window.require("log4js"),a=s.getLogger("neostaff");class i{login(t,e){axios.post("login",e).then(e=>{let o=e.data.data.token;localStorage.setItem("token",o),window.axios.defaults.headers.common["Authorization"]="Bearer "+o,t.$router.push({name:"dashboard"})}).catch(e=>{t.password=null,t.$refs.login_form.resetValidation(),t.busy=!1,ErrorHandler.render(e),a.error("Login APIs: "+JSON.stringify(e))})}async logout(){try{let t=await axios.post("logout");return t.data.message&&NotificationHandler.simpleSuccess(t.data.message),t}catch(t){return!0}}}e["a"]=new i},"4a4b":function(t,e,o){"use strict";o.r(e);const{remote:s}=window.require("electron"),a=s.app,i=window.require("path");var r=window.require("log4js");const n=i.join(a.getPath("temp"),"./neoStaff_tmp/Logs");console.log=function(){},r.configure({appenders:{neostaff:{type:"dateFile",filename:i.join(n,"all-the-logs.log")}},categories:{default:{appenders:["neostaff"],level:"debug"}}});class l{}e["default"]=new l},"56d7":function(t,e,o){"use strict";o.r(e);var s=o("a026"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("router-view")],1)},i=[],r={name:"App"},n=r,l=o("2877"),c=o("6544"),d=o.n(c),u=o("7496"),p=Object(l["a"])(n,a,i,!1,null,null,null),v=p.exports;d()(p,{VApp:u["a"]});var f=o("8c4f");const m=(t,e,o)=>{let s=localStorage.getItem("token");s?o():o({name:"login"})};var h=m;const g=(t,e,o)=>{let s=localStorage.getItem("token");s?o({name:"dashboard"}):o()};var k=g;const _=[{path:"",redirect:{name:"login"}},{path:"/login",name:"login",beforeEnter:k,component:o("6555").default},{path:"/dashboard",name:"dashboard",beforeEnter:h,component:o("b18a").default},{path:"/idle",name:"idle",beforeEnter:h,component:o("b7f8").default}];var b=_;s["a"].use(f["a"]),s["a"].component("loading",{template:"<div>Loading!</div>"});const y=new f["a"]({routes:b});y.beforeResolve((t,e,o)=>{t.name&&NProgress.start(),o()}),y.afterEach((t,e)=>{NProgress.done()});var w=y,S=o("2f62");s["a"].use(S["a"]);var T=new S["a"].Store({state:{taskStates:JSON.parse(localStorage.getItem("completedTasks"))||{}},mutations:{setTaskStates:(t,{data:e})=>{t.taskStates=e}},actions:{setTaskStates:({commit:t},e)=>{t("setTaskStates",e)}},modules:{}}),x=o("f309");o("15f5");const j={theme:{themes:{light:{primary:"#0D47A1"}}},icons:{iconfont:"fa"}};var C=j;s["a"].use(x["a"]);var P=new x["a"](C);const I=window.require("log4js"),A=I.getLogger("neostaff"),L="https://media.neostaff.app/api/v1/";window.$=window.jQuery=o("1157"),window.axios=o("bc3a"),window.axios.defaults.baseURL=L,window.axios.defaults.headers.common["Authorization"]="Bearer "+localStorage.getItem("token"),window.axios.interceptors.response.use((function(t){return t}),(function(t){if(A.debug("Unauthorized : "+t.response.status),401!==t.response.status)return Promise.reject(t);localStorage.removeItem("token"),window.axios.defaults.headers.common["Authorization"]=null,w.push({name:"login"})})),s["a"].config.productionTip=!1,window.NotificationHandler=o("190a").default,window.ErrorHandler=o("4165").default,window.CaptureHandler=o("011c").default,window.OffileHandler=o("237a").default,window.LoggerHandler=o("4a4b").default,new s["a"]({router:w,store:T,vuetify:P,render:function(t){return t(v)}}).$mount("#app"),A.info("App started")},6555:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-content",[o("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[o("v-row",{attrs:{justify:"center",align:"center"}},[o("v-col",{attrs:{cols:"10",sm:"8",md:"6",lg:"4"}},[o("v-form",{ref:"login_form",on:{submit:function(e){return e.preventDefault(),t.login(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-sheet",[o("v-img",{staticClass:"mb-1",attrs:{src:"img/logo-dark.png","aspect-ratio":"7",contain:""}}),o("v-toolbar",{attrs:{flat:""}},[o("v-spacer"),o("v-toolbar-title",[t._v("Login")]),o("v-spacer")],1),o("v-card-text",[o("v-text-field",{attrs:{label:"Email",disabled:t.busy,rules:t.rules.username,required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),o("v-text-field",{attrs:{disabled:t.busy,label:"Password",type:"password",rules:t.rules.password,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{disabled:t.noCan,type:"submit",color:"primary",depressed:""}},[t._v("Login")]),o("v-spacer"),o("v-btn",{attrs:{href:"https://www.neostaff.app/forgotpassword",target:"_blank",color:"warning",outlined:""}},[t._v("Forgot Password")]),o("v-spacer")],1)],1)],1)],1)],1),o("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.busy,callback:function(e){t.busy=e},expression:"busy"}},[o("v-card",{attrs:{color:"primary",dark:""}},[o("v-card-text",[t._v(" Accessing... "),o("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)],1)},a=[],i=o("49a4"),r=o("237a"),n=o("4165");const l=window.require("log4js"),c=l.getLogger("neostaff");var d={data(){return{valid:!0,username:null,password:null,busy:!1,rules:{username:[t=>!!t||"The username is required."],password:[t=>!!t||"The password is required."]}}},computed:{noCan(){return!(this.valid&&!this.busy)}},methods:{login(){this.busy=!0;let t={email:this.username,password:this.password,device_name:"desktop"};r["default"].CheckNetworkStatus().then(e=>{i["a"].login(this,t),c.info("Login successfully...")},t=>{c.error("You have no active internet connection!"),n["default"].showError("You have no active internet connection!"),this.busy=!1})}}},u=d,p=(o("d8dd"),o("2877")),v=o("6544"),f=o.n(v),m=o("8336"),h=o("b0af"),g=o("99d9"),k=o("62ad"),_=o("a523"),b=o("a75b"),y=o("169a"),w=o("4bd4"),S=o("adda"),T=o("8e36"),x=o("0fd9"),j=o("8dd9"),C=o("2fa4"),P=o("8654"),I=o("71d9"),A=o("2a7f"),L=Object(p["a"])(u,s,a,!1,null,null,null);e["default"]=L.exports;f()(L,{VBtn:m["a"],VCard:h["a"],VCardActions:g["a"],VCardText:g["b"],VCol:k["a"],VContainer:_["a"],VContent:b["a"],VDialog:y["a"],VForm:w["a"],VImg:S["a"],VProgressLinear:T["a"],VRow:x["a"],VSheet:j["a"],VSpacer:C["a"],VTextField:P["a"],VToolbar:I["a"],VToolbarTitle:A["b"]})},"7dcd":function(t,e,o){"use strict";var s=o("237a");const{remote:a}=window.require("electron"),i=a.app,r=a.require("fs"),n=window.require("path"),l=n.join(i.getPath("temp"),"./neoStaff_tmp");class c{index(t){s["default"].CheckNetworkStatus().then(e=>{axios.get(`accounts/${t.selectedAccount.id}/projects`).then(e=>{t.projectsList=e.data.data;const o="./projectsList_Offline";r.writeFile(n.join(l,o+".txt"),JSON.stringify(t.projectsList),(function(t){t&&console.log(t)})),t.$nextTick(()=>{t.getProjectsTimeToday(),t.busyProject=!1})}).catch(e=>{ErrorHandler.render(e),t.busyProject=!1})},e=>{r.readdir(l,(e,o)=>{if(e)return console.log("Unable to scan directory: "+e);let s=o.filter(t=>"projectsList_Offline.txt"==t);if(s.length>0){let e=n.join(l,s[0]);r.readFile(e,"utf8",(e,o)=>{if(e)return void console.log(o);let s=JSON.parse(o);t.projectsList=s,t.$nextTick(()=>{t.getProjectsTimeToday()}),t.busyProject=!1})}})})}tasks(t,e){s["default"].CheckNetworkStatus().then(o=>{axios.get(`accounts/${t.selectedAccount.id}/projects/${e}/tasks`).then(e=>{t.$nextTick(()=>{let o=e.data.data;if(t.tasksCompleted)t.tasksList=o;else{let e=[];$.each(o,(t,o)=>{o.completed||e.push(o)}),t.tasksList=e}t.totalTasks=o,t.busyTask=!1})}).catch(e=>{ErrorHandler.render(e),t.busyTask=!1})},e=>{t.totalTasks=[],t.busyTask=!1})}async completeTask(t,e){try{let o=await axios.get(`accounts/${t.selectedAccount.id}/tasks/${e}/complete`);return o}catch(o){return ErrorHandler.render(o),null}}}e["a"]=new c},"9a92":function(t,e,o){},aef0:function(t,e,o){"use strict";o("406c")},b18a:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-app-bar",{staticStyle:{"margin-bottom":"1px","background-color":"#fff"},attrs:{dense:"",light:""}},[o("v-spacer"),o("v-icon",{staticStyle:{"margin-right":"10px"}},[t._v("fa-building")]),o("span",{staticStyle:{"margin-right":"20px","font-size":"13px"}},[t._v(t._s(null!=t.selectedAccount?t.selectedAccount.name:""))]),o("v-icon",{staticStyle:{"margin-right":"10px"}},[t._v("fa-user")]),o("span",{staticStyle:{"margin-right":"20px","font-size":"13px"}},[t._v(t._s(null!=t.user?t.user.firstname:""))]),o("v-menu",{attrs:{left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({attrs:{text:""}},s),[o("v-icon",[t._v("fa-ellipsis-v")])],1)]}}])},[o("v-list",[o("v-list-item",{attrs:{link:"",disabled:""}},[o("v-list-item-icon",[o("v-icon",[t._v("far fa-user")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Signed in as "+t._s(null!=t.user?t.user.firstname:"")+" "+t._s(null!=t.user?t.user.lastname:""))])],1)],1),o("v-divider"),t.working?t._e():o("v-list-item",{attrs:{link:"",disabled:!t.project||t.busy},on:{click:function(e){t.project&&(t.working=!0)}}},[o("v-list-item-icon",[o("v-icon",[t._v("far fa-play-circle")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Start working")])],1)],1),t.working?o("v-list-item",{attrs:{link:""},on:{click:function(e){t.working=!1}}},[o("v-list-item-icon",[o("v-icon",[t._v("far fa-stop-circle")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Stop working")])],1)],1):t._e(),o("v-list-item",{attrs:{link:""},on:{click:function(e){return t.openLinkInBrowser("https://media.neostaff.app/dashboard")}}},[o("v-list-item-icon",[o("v-icon",[t._v("fas fa-tachometer-alt")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Open Dashboard")])],1)],1),o("v-list-item",{attrs:{link:""},on:{click:function(e){return t.openLinkInBrowser("https://media.neostaff.app/activities")}}},[o("v-list-item-icon",[o("v-icon",[t._v("far fa-clock")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Add/Edit Time")])],1)],1),o("v-list-item",{attrs:{link:""}},[o("v-list-item-icon",[o("v-icon",[t._v("fas fa-bug")])],1),o("v-list-item-content",[o("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-list-item-title",t._g(t._b({staticStyle:{"font-size":"13px"}},"v-list-item-title",a,!1),s),[t._v("Report an Error ")])]}}]),model:{value:t.reportAnError.dialog,callback:function(e){t.$set(t.reportAnError,"dialog",e)},expression:"reportAnError.dialog"}},[o("v-form",{ref:"reportAnError_form",on:{submit:function(e){return e.preventDefault(),t.sendReportAnError(t.reportAnError)}}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Report an Error")])]),o("v-card-text",[o("v-container",[o("v-row",[o("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[o("v-textarea",{attrs:{name:"txtDescribeError",filled:"",label:"Describe the error","auto-grow":""},model:{value:t.reportAnError.error,callback:function(e){t.$set(t.reportAnError,"error",e)},expression:"reportAnError.error"}})],1)],1)],1),o("small",[t._v("Application configuration and log files will be sent with the report.")])],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.reportAnError.dialog=!1}}},[t._v(" Cancel ")]),o("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"},on:{click:function(e){t.reportAnError.dialog=!1}}},[t._v(" Send ")])],1)],1)],1)],1)],1)],1),o("v-list-item",{attrs:{link:""},on:{click:function(e){return t.openLinkInBrowser("https://support.neostaff.app")}}},[o("v-list-item-icon",[o("v-icon",[t._v("far fa-question-circle")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Help Center")])],1)],1),o("v-divider"),o("v-list-item",{attrs:{link:""}},[o("v-list-item-icon",[o("v-icon",[t._v("fas fa-tools")])],1),o("v-list-item-content",[o("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-list-item-title",t._g(t._b({staticStyle:{"font-size":"13px"}},"v-list-item-title",a,!1),s),[t._v("Preferences... ")])]}}]),model:{value:t.preference.dialog,callback:function(e){t.$set(t.preference,"dialog",e)},expression:"preference.dialog"}},[o("v-form",{ref:"preference_form",on:{submit:function(e){return e.preventDefault(),t.applyPreference(t.preference)}}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v("Preferences")])]),o("v-card-text",[o("v-container",[o("v-row",[o("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[o("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{label:"Show notification when screenshot is taken"},model:{value:t.preference.screenShotTakenNotification,callback:function(e){t.$set(t.preference,"screenShotTakenNotification",e)},expression:"preference.screenShotTakenNotification"}})],1),o("v-col",{staticClass:"pa-0",attrs:{cols:"12"}},[o("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{label:"Show notification when starting or stopping the timer"},model:{value:t.preference.startOrStopTimerNotification,callback:function(e){t.$set(t.preference,"startOrStopTimerNotification",e)},expression:"preference.startOrStopTimerNotification"}})],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.preference.dialog=!1}}},[t._v(" Cancel ")]),o("v-btn",{attrs:{color:"blue darken-1",text:"",type:"submit"},on:{click:function(e){t.preference.dialog=!1}}},[t._v(" Apply ")])],1)],1)],1)],1)],1)],1),o("v-list-item",{attrs:{link:""}},[o("v-list-item-icon",[o("v-icon",[t._v("fas fa-sync-alt")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Check for Updates")])],1)],1),o("v-list-item",{attrs:{link:""}},[o("v-list-item-icon",[o("v-icon",[t._v("fas fa-info-circle")])],1),o("v-list-item-content",[o("v-dialog",{attrs:{persistent:"","max-width":"400px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-list-item-title",t._g(t._b({staticStyle:{"font-size":"13px"}},"v-list-item-title",a,!1),s),[t._v("About NeoStaff ")])]}}]),model:{value:t.neoStaffAbout.dialog,callback:function(e){t.$set(t.neoStaffAbout,"dialog",e)},expression:"neoStaffAbout.dialog"}},[o("v-card",{attrs:{justify:"center",align:"center"}},[o("v-card-text",[o("v-flex",{staticClass:"mb-4 pt-4",staticStyle:{width:"220px"}},[o("v-img",{staticClass:"mb-1",attrs:{src:"img/logo-dark.png","aspect-ratio":"7",contain:""}})],1),o("div",[t._v(t._s(t.neoStaffAbout.appVerson))])],1),o("v-card-text",{staticClass:"pa-0"},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-textarea",{attrs:{"hide-details":"",outlined:"",label:"",rows:"5","no-resize":"",value:t.neoStaffAbout.termAndCondition}}),o("div",{staticStyle:{"font-size":"11px"}},[t._v(t._s(t.neoStaffAbout.copyrights))])],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.neoStaffAbout.dialog=!1}}},[t._v(" Close ")])],1)],1)],1)],1)],1),o("v-divider"),o("v-list-item",{attrs:{link:""},on:{click:t.logout}},[o("v-list-item-icon",[o("v-icon",[t._v("fa-sign-out-alt")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Sign Out")])],1)],1),o("v-list-item",{attrs:{link:""},on:{click:function(e){return t.quitApp()}}},[o("v-list-item-icon",[o("v-icon",[t._v("far fa-times-circle")])],1),o("v-list-item-content",[o("v-list-item-title",{staticStyle:{"font-size":"13px"}},[t._v("Quit NeoStaff")])],1)],1)],1)],1)],1),o("v-dialog",{attrs:{persistent:"",width:"300"},model:{value:t.closing,callback:function(e){t.closing=e},expression:"closing"}},[o("v-card",{attrs:{color:"primary",dark:""}},[o("v-card-text",[t._v(" Closing... "),o("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1),o("v-navigation-drawer",{attrs:{width:"420",permanent:"",app:""}},[o("br"),o("v-toolbar",{attrs:{flat:""}},[o("v-toolbar-items",[t.working?o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({attrs:{icon:""},on:{click:function(e){t.working=!1}}},s),[o("v-icon",{staticStyle:{"font-size":"28px"},attrs:{color:t.timerColor}},[t._v("far fa-stop-circle")])],1)]}}],null,!1,2841118796)},[o("span",[t._v("Stop")])]):o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({attrs:{icon:"",disabled:!t.project||t.busy},on:{click:function(e){t.project&&(t.working=!0)}}},s),[o("v-icon",{staticStyle:{"font-size":"28px"},attrs:{color:"primary"}},[t._v("far fa-play-circle")])],1)]}}])},[o("span",[t._v("Start")])])],1),o("v-spacer"),o("v-text-field",{staticClass:"counter-timer",attrs:{"prepend-inner-icon":"far fa-clock","append-icon":t.pauseIcon,"background-color":t.timerColor,dark:"",outlined:"","hide-details":"",dense:"",readonly:""},on:{"click:append":function(e){t.working=!1}},model:{value:t.timerCounter,callback:function(e){t.timerCounter=e},expression:"timerCounter"}}),o("v-spacer")],1),o("v-divider"),o("v-toolbar",{attrs:{flat:"",dense:""}},[o("v-spacer"),o("v-toolbar-title",[o("h3",{staticStyle:{"margin-top":"15px","font-size":"16px"}},[t._v(t._s(t.getProjectTitle))]),o("h5",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.getTaskTitle))])]),o("v-spacer")],1),o("v-toolbar",{attrs:{flat:"",dense:""}},[o("v-spacer"),o("v-toolbar-title",[o("v-subheader",[t._v("Total worked today "+t._s(t.timeWorked))])],1),o("v-spacer")],1),o("v-toolbar",{attrs:{flat:"",dense:""}},[o("v-text-field",{attrs:{"prepend-inner-icon":"fa-search",height:"small",label:"Search project",outlined:"",dense:"","hide-details":"",color:"info"},model:{value:t.searchProject,callback:function(e){t.searchProject=e},expression:"searchProject"}})],1),o("v-toolbar",{staticStyle:{"background-color":"#0d47a1",height:"40px"},attrs:{flat:"",dense:"",dark:""}},[o("v-toolbar-title",[t._v("Projects List")]),o("v-spacer"),o("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({attrs:{disabled:t.busy,icon:""},on:{click:t.getProjects}},s),[o("v-icon",[t._v("fa-redo-alt")])],1)]}}])},[o("span",[t._v("Update List")])])],1),o("v-divider",{staticClass:"mb-2"}),o("v-data-table",{staticClass:"project-table",attrs:{loading:t.busyProject,headers:[{text:"",value:"title"}],search:t.searchProject,height:"330",items:t.projectsList,"items-per-page":null!=t.projectsList?t.projectsList.length:0,"hide-default-footer":"","hide-default-header":"","loading-text":"Loading..."},scopedSlots:t._u([{key:"item.title",fn:function(e){var s=e.item;return[o("v-toolbar",{style:t.projectSelected=="project-sel-"+s.id?"background-color:#0d47a1":"",attrs:{flat:"",dense:"",dark:t.projectSelected=="project-sel-"+s.id}},[o("v-toolbar-items",[t.working&&t.projectSelected=="project-sel-"+s.id?o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({attrs:{icon:""},on:{click:function(e){t.working=!1}}},s),[o("v-icon",[t._v("fa-pause")])],1)]}}],null,!0)},[o("span",[t._v("Stop")])]):o("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({attrs:{icon:"",disabled:t.working},on:{click:function(e){return t.selectProject(s,!0)}}},a),[o("v-icon",[t._v("fa-play")])],1)]}}],null,!0)},[o("span",[t._v("Start")])])],1),o("v-list-item",{attrs:{link:"",disabled:t.working&&t.projectSelected!=="project-sel-"+s.id},on:{click:function(e){return t.selectProject(s,!1)}}},[o("v-toolbar-title",[o("h6",[t._v(t._s(s.title))])]),o("v-spacer"),o("v-chip",{staticClass:"mr-2"},[t._v(t._s(s.time)+" ")])],1)],1)]}}])})],1),o("v-content",[o("v-container",{attrs:{fluid:""}},[o("v-sheet",[o("v-subheader",[o("v-col",{staticClass:"pt-1",staticStyle:{"margin-top":"10px"},attrs:{cols:"12"}},[o("b",{staticClass:"mr-2",staticStyle:{"font-size":"15px"}},[t._v("Tasks")]),o("br"),t._v(t._s(t.projectTitle)),o("br")])],1),o("v-row",{staticStyle:{"margin-top":"5px"},attrs:{justify:"space-around"}},[o("v-col",{attrs:{cols:"4"}},[o("v-select",{attrs:{label:"See Tasks:","hide-details":"",dense:"",outlined:"",items:t.tasksItemsPerPageList},model:{value:t.tasksItemsToShow,callback:function(e){t.tasksItemsToShow=e},expression:"tasksItemsToShow"}})],1),o("v-col",{staticClass:"pt-1",attrs:{cols:"3"}},[o("v-checkbox",{staticClass:"pt-0",attrs:{label:"Show completed","hide-details":""},model:{value:t.tasksCompleted,callback:function(e){t.tasksCompleted=e},expression:"tasksCompleted"}})],1),o("v-col",{attrs:{cols:"4"}},[o("v-text-field",{attrs:{"prepend-inner-icon":"fa-search",label:"Search task:","hide-details":"",dense:"",outlined:""},model:{value:t.searchTask,callback:function(e){t.searchTask=e},expression:"searchTask"}})],1)],1)],1)],1),o("v-divider"),o("v-container",[t.busyTask||null==t.tasksList||0!=t.tasksList.length?t._e():o("v-row",{attrs:{align:"center"}},[o("v-col",{staticStyle:{"margin-top":"10%"},attrs:{cols:"12"}},[o("v-row",{attrs:{justify:"center"}},[o("v-icon",{attrs:{"x-large":""}},[t._v("fa-tasks")])],1),o("v-row",{attrs:{justify:"center"}},[o("v-subheader",[t._v("There're not tasks avaliable.")])],1)],1)],1),t.busyTask?o("v-row",{attrs:{justify:"center"}},[o("v-col",{attrs:{cols:"8"}},[o("v-progress-linear",{attrs:{indeterminate:""}}),o("v-row",{attrs:{justify:"center"}},[o("v-subheader",[t._v("Loading...")])],1)],1)],1):t._e(),!t.busyTask&&null!=t.tasksList&&t.tasksList.length>0?o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-toolbar",{attrs:{flat:"",dense:""}},[o("v-spacer"),"all"!=t.tasksItemsToShow?o("v-pagination",{attrs:{length:t.totalTasksPages},model:{value:t.tasksPage,callback:function(e){t.tasksPage=e},expression:"tasksPage"}}):t._e(),o("v-spacer")],1),o("v-sheet",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-data-table",{attrs:{page:t.tasksPage,headers:t.tasksTableHeaders,search:t.searchTask,height:"370",items:t.tasksList,"items-per-page":t.taskItemsPerPage,"hide-default-footer":""},on:{"update:page":function(e){t.tasksPage=e}},scopedSlots:t._u([{key:"item.title",fn:function(e){var s=e.item;return[o("v-list-item",{attrs:{dense:"",link:"",disabled:1==s.completed},on:{click:function(e){return t.selectTask(s,!1)}}},[t.taskSelected=="task-sel-"+s.id?o("v-icon",{staticClass:"mr-2",attrs:{color:"success",small:""}},[t._v("fa-check-circle")]):t._e(),o("v-list-item-title",[t._v(t._s(s.title))])],1)]}},{key:"item.details",fn:function(e){var s=e.item;return[o("v-menu",{attrs:{"max-width":"200","offset-y":"","nudge-left":"10"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({attrs:{icon:""}},s),[o("v-icon",{attrs:{color:"info"}},[t._v("fa-info-circle")])],1)]}}],null,!0)},[o("v-card",[o("v-card-title",[t._v("Description:")]),o("v-card-text",[t._v(t._s(s.description))])],1)],1)]}},{key:"item.completed",fn:function(e){var s=e.item;return[o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[1==s.completed?o("v-icon",t._g({attrs:{color:"success"}},a),[t._v("fa-check-double")]):t._e()]}}],null,!0)},[o("span",[t._v("Completed")])]),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[0==s.completed?o("v-icon",t._g({attrs:{color:"warning"}},a),[t._v("fa-exclamation-triangle")]):t._e()]}}],null,!0)},[o("span",[t._v("Pending")])])]}},{key:"item.actions",fn:function(e){var s=e.item;return[s.completed?t._e():o("div",[t.taskPlayed=="task-sel-"+s.id&&t.working?o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[o("v-btn",t._g({staticClass:"mr-2",attrs:{icon:""},on:{click:function(e){t.working=!1}}},s),[o("v-icon",{attrs:{color:"warning"}},[t._v("fa-pause")])],1)]}}],null,!0)},[o("span",[t._v("Pause")])]):o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[o("v-btn",t._g({staticClass:"mr-2",attrs:{icon:"",disabled:1==t.working},on:{click:function(e){return t.selectTask(s,!0)}}},a),[o("v-icon",{attrs:{color:"primary"}},[t._v("fa-play")])],1)]}}],null,!0)},[o("span",[t._v("Start")])]),o("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){e.on;return[o("v-btn",{attrs:{disabled:t.working&&t.taskSelected!=="task-sel-"+s.id&&!t.stoping||!t.stoping&&t.working&&t.taskSelected=="task-sel-"+s.id,icon:""},on:{click:function(e){return t.completeTask(s)}}},[o("v-icon",{attrs:{color:t.taskStates[s.id]?"default":"info"}},[t._v("fa-check")])],1)]}}],null,!0)},[o("span",[t._v("Mark as completed")])])],1)]}}],null,!1,145564083)})],1)],1)],1)],1)],1):t._e()],1)],1),o("v-footer",{attrs:{app:""}},[o("v-spacer"),o("v-subheader",[t._v("NeoStaff © Copyright 2021")]),o("v-spacer")],1)],1)},a=[],i=function(){let t={closing:!1,working:!1,stoping:!0,totalWorkedToday:{date:(new Date).toLocaleDateString(),hours:0,mins:0},timePassed:{date:(new Date).toLocaleDateString(),time:0},lastScreenshot:0,timer:{h:0,m:0,s:0,passed:0},busyProject:!1,projectSelected:null,projectPlayed:null,projectsList:[],searchProject:null,projectsWorkedToday:{date:(new Date).toLocaleDateString(),items:[]},project:null,selectedProject:null,busyTask:!1,tasksItemsToShow:20,tasksList:[],totalTasks:[],tasksTableHeaders:[{text:"Title",value:"title"},{text:"Details",value:"details",sortable:!1},{text:"Status",value:"completed",sortable:!1,align:"center"},{text:"",value:"actions",sortable:!1}],tasksItemsPerPageList:[{text:"All tasks",value:"all"},{text:"5",value:5},{text:"10",value:10},{text:"20",value:20},{text:"50",value:50},{text:"100",value:100}],tasksCompleted:!1,tasksPage:1,searchTask:null,taskSelected:null,taskPlayed:null,task:null,playingTask:null,completingTask:!1,selectedAccount:null,company:{},user:{},firstCaptured:!1,allTaskStates:{},taskStates:{},total_active_time:0,total_mouse_event:0,total_key_event:0,mouse_event:0,total_activity_percentage:0,key_event:0,idleModeActivated:!1,reportDialog:!1,screenshotCaptured:!1,screenshotCapturedTime:0,neoStaffAbout:{appVerson:0,appName:"",dialog:!1,termAndCondition:"Term and condition of neoStaff",copyrights:"Copyright © 2021-2022 Neostaff, LLC. All rights reserved."},reportAnError:{userId:0,error:"",IP:"0.0.0.0",dialog:!1},preference:{screenShotTakenNotification:!0,startOrStopTimerNotification:!0,dialog:!1},cloneWorkLogs:{t_a_time:0,t_m_event:0,t_k_event:0,t_a_percentage:0,t_t_passed:0}};return t},r={timePassed(t){localStorage.setItem("projectsWorkedToday",JSON.stringify(t))},tasksCompleted(t){let e=this.totalTasks;if(t)this.tasksList=e;else{let t=[];$.each(e,(e,o)=>{o.completed||t.push(o)}),this.tasksList=t}},timeScreen(t){localStorage.setItem("timeScreen",t)},async working(t){this.working?(this.stoping=!1,this.start()):(this.stoping=!0,this.stop())},allTaskStates(t){this.taskStates=t}},n={getProjectTitle(){return this.project?this.project.title:""},getTaskTitle(){return this.project&&this.playingTask?this.playingTask.title:""},busy(){return!!(this.busyProject||this.working||this.busyTask)},timeWorked(){let t=this.totalWorkedToday.hours,e=this.totalWorkedToday.mins,o=e<10?"0"+e:e,s=t<10?"0"+t:t;return s+":"+o},projectTitle(){return this.project?this.project.title:"No Selected project"},taskItemsPerPage(){let t=this.tasksItemsToShow;return"all"==t?this.tasksList.length:t},totalTasksPages(){let t=this.tasksList.length,e=this.taskItemsPerPage,o=t/e;if(o<0)return 0;{let t=Math.round(o);return o>t?t+1:t}},timerCounter(){let t=this.timer.h,e=this.timer.m,o=this.timer.s,s=t<10?"0"+t:t,a=e<10?"0"+e:e,i=o<10?"0"+o:o;return s+":"+a+":"+i},timerColor(){return this.working&&!this.stoping?"warning":(this.working&&this.working,"primary")},pauseIcon(){return this.working&&!this.stoping?"fa-pause":this.working&&this.stoping?"fa-play":""}},l=o("011c"),c=o("49a4"),d=o("7dcd");class u{reportAnError(t,e){axios.post("report-error",e).then(t=>{}).catch(e=>{t.reportAnError_Desc="",ErrorHandler.render(e)}),NotificationHandler.simpleSuccess("Error report sent. Thanks!")}}var p=new u;const v=window.require("log4js"),f=v.getLogger("neostaff"),{ipcRenderer:m}=window.require("electron");o("b9fc");var h=null;let g=new Date;var k={getUserDetails(t){this.user=t.user,this.selectedAccount=t.selectedAccount},getProjects(){this.busyProject=!0,this.tasksList=[],this.totalTasks=[],this.project=null,this.projectSelected=null,this.projectsList=[],d["a"].index(this)},selectProject(t,e){f.info("selectProject clicked");let o=this.projectSelected;if(this.selectedProject=t,this.project=t,o!=="project-sel-"+t.id){this.projectSelected="project-sel-"+t.id;let e=t.id;this.getTasks(e)}else e&&!this.busyTask&&(this.task=null,this.playingTask=null,this.projectPlayed="project-sel-"+t.id,this.project=t,this.taskPlayed=null,this.working=!0,this.stoping=!1);localStorage.setItem("runningPojects",JSON.stringify({tasksList:this.tasksList,projectsList:this.projectsList,selectedProject:this.selectedProject,selectedAccount:this.selectedAccount}))},selectTask(t,e){f.info("selectTask clicked");let o=this.taskSelected;o!=="task-sel-"+t.id&&(this.taskSelected="task-sel-"+t.id,this.task=t),e&&(this.playingTask=this.task,this.project=this.selectedProject,this.projectPlayed=this.projectSelected,this.taskPlayed="task-sel-"+t.id,this.working=!0,this.stoping=!1)},async completeTask(t){let e="Are you sure the task is complete?",o=t.id,s=await NotificationHandler.confirm(e);this.allTaskStates[o]=!!s,console.log(this.allTaskStates),localStorage.setItem("completedTasks",JSON.stringify(this.allTaskStates))},getTasks(t){this.busyTask=!0,d["a"].tasks(this,t)},start(){f.debug("Started timer"),this.working=!0,this.stoping=!1,console.log("start"),console.log(this.working),console.log(this.stopping),l["default"].startIdlepopInterval(),m.send("key-mouse-event-hook-register","start"),f.debug("key-mouse-event-hook-register is started"),g=new Date,this.total_active_time=this.getSystemTimeWithin10min(),this.screenshotCapturedTime=this.getRandomScreenshotTime(1,this.total_active_time),f.debug("total_active_time :"+this.total_active_time),this.runing()},getcountkeyNew(){this.total_mouse_event=this.mouse_event,this.total_key_event=this.key_event;let t=this.total_key_event+this.total_mouse_event;this.total_activity_percentage=t/this.total_active_time*100,console.log("M-A",this.total_mouse_event),console.log("K-A",this.total_key_event),m.send("key-mouse-event-hook-register","reset")},getcountkey(){this.mouse_event=0,this.key_event=0;let t=0;this.total_active_time=0,this.total_mouse_event=0,this.total_key_event=0,null!=h&&clearInterval(h),h=setInterval(()=>{window.addEventListener("keypress",(function(){key_event+=1}),!0),window.addEventListener("mousedown",(function(){mouse_event+=1}),!0),window.addEventListener("scroll",(function(){mouse_event+=1}),!0),t%6e4==0&&(this.total_active_time=this.key_event+this.mouse_event,this.total_mouse_event=this.mouse_event,this.total_key_event=this.key_event,console.log("M-A",this.total_mouse_event),console.log("K-A",this.total_key_event),m.send("key-mouse-event-hook-register","reset")),t+=1},1e3)},stop(){if(this.stoping=!1,this.timer.h=0,this.timer.m=0,this.timer.s=0,this.timer.passed=0,this.screenshotCaptured=!1,this.screenshotCapturedTime=0,console.log("stop"),console.log(this.working),console.log(this.stopping),this.preference&&this.preference.startOrStopTimerNotification&&"granted"===Notification.permission){new Notification("NeoStaff",{body:"Stopped timer for project "+(this.project?this.project.title:""),icon:"http://timetracker.vnddev.com/app/public/favicon.ico"})}l["default"].stopIdlepopInterval(),m.send("key-mouse-event-hook-register","stop"),this.regiserPostTimer(),f.debug("Stopped timer"),f.debug("key-mouse-event-hook-register stopped")},getSystemTimeWithin10min(){let t=g,e=t.getMinutes(),o=Number.isInteger(e/10),s=0;if(o)return 600;while(!Number.isInteger(e/10))e++,s++;return 60*s},runing(){this.working&&(this.stoping||(this.changeTimer(),this.saveOfflineData(),this.$nextTick(()=>{let t=this.timer.passed;t===this.screenshotCapturedTime&&(this.screenshotCaptured||(this.screenshotCaptured=!0,this.takeScreenshot())),t===this.total_active_time&&this.activitiesDataPost()})),setTimeout(()=>{this.runing()},1e3))},regiserPostTimer(){if(!this.working&&!this.stoping){let t=this.t_t_passed;t===this.total_active_time?this.takeScreenshot():setTimeout(()=>{this.regiserPostTimer()},1e3),this.t_t_passed++}},takeScreenshot(){let t={from:g,to:g};l["default"].render(t)},getRandomScreenshotTime(t,e){return Math.floor(Math.random()*(e-t+1))+t},activitiesDataPost(){console.log("running"),console.log(this.working),console.log(this.stopping),this.getcountkeyNew(),this.timer.passed=0;let t=null;this.task&&(t=this.task.id);let e=this.total_activity_percentage<=100?this.total_activity_percentage:100,o={from:g,to:g,task_id:t,project_id:this.project.id,total_active_time:this.cloneWorkLogs.t_a_time>0?this.cloneWorkLogs.t_a_time:this.total_active_time,total_key_event:this.cloneWorkLogs.t_k_event>0?this.cloneWorkLogs.t_k_event:this.total_key_event,total_mouse_event:this.cloneWorkLogs.t_m_event>0?this.cloneWorkLogs.t_m_event:this.total_mouse_event,total_activity_percentage:this.cloneWorkLogs.t_a_percentage>0?this.cloneWorkLogs.t_a_percentage:e,idleMode:this.idleModeActivated,selectedAccount:this.selectedAccount,idleModeActivated:this.idleModeActivated};f.debug("takeScreenshot method called : "+JSON.stringify(o)),console.log("nextTick:",o),l["default"].handleStream(o),this.lastScreenshot=this.timePassed.time,this.resetTimer()},resetTimer(){g=new Date,this.total_active_time=600,this.mouse_event=0,this.key_event=0,this.cloneWorkLogs.t_a_time=0,this.cloneWorkLogs.t_m_event=0,this.cloneWorkLogs.t_k_event=0,this.cloneWorkLogs.t_a_percentage=0,this.cloneWorkLogs.t_t_passed=0,this.screenshotCaptured=!1,this.screenshotCapturedTime=this.getRandomScreenshotTime(1,this.total_active_time),console.log("cloneWorkLogs :",this.cloneWorkLogs)},changeTimeToProject(){let t=this.project,e=JSON.parse(localStorage.getItem("projectsWorkedToday")),o=e.items?e.items:[];const s=o.filter(e=>e.id===t.id)[0];let a=[];if(s){let e,i=parseInt(s.time.split(":")[0]),r=parseInt(s.time.split(":")[1]);r++,e=r>59?i+1+":00":r>9?`${i}:${r}`:`${i}:0${r}`,t.time=e,a=o.map(o=>o.id===t.id?{id:o.id,time:e}:o)}else t.time="0:01",a=o.map(t=>t),a.push({id:t.id,time:"0:01"});this.projectsWorkedToday.items=a.map(t=>t),localStorage.setItem("projectsWorkedToday",JSON.stringify({date:(new Date).toLocaleDateString(),items:a}))},getProjectsTimeToday(){if(this.projectsList)for(let t of this.projectsList){let e=this.projectsWorkedToday.items;if(e){let o;if(e.length>0)for(let s of e){if(s.id==t.id){o=s.time,t.time=o;break}o="0:00",t.time=o}else o="0:00",t.time=o}}},changeTimer(){this.timer.s+=1;this.timer.h;let t=this.timer.m,e=this.timer.s;if(e>59){this.timer.s=0,this.timer.m+=1,this.changeTimeToProject();let t=this.totalWorkedToday.mins+=1;t>59&&(this.totalWorkedToday.mins=0,this.totalWorkedToday.hours+=1),localStorage.setItem("totalWorkedToday",JSON.stringify(this.totalWorkedToday))}t>59&&(this.timer.s=0,this.timer.m=0,this.timer.h+=1),this.timer.passed+=1,this.timePassed.time+=1},async logout(){this.stop();let t="Do you want sign out?",e=await NotificationHandler.confirm(t);if(e){this.closing=!0;await c["a"].logout(this);localStorage.removeItem("token"),window.axios.defaults.headers.common["Authorization"]=null,this.$router.push({name:"login"})}},getTotalWorkedToday(){let t,e=JSON.parse(localStorage.getItem("totalWorkedToday")),o=(new Date).toLocaleDateString();return e&&e.date==o?this.totalWorkedToday=e:(t={date:o,hours:0,mins:0},localStorage.setItem("totalWorkedToday",JSON.stringify(t)),this.totalWorkedToday=t),!0},getProjectsWorkedToday(){let t=JSON.parse(localStorage.getItem("projectsWorkedToday")),e=(new Date).toLocaleDateString();return t&&e==t.date||(t={date:e,items:[]},localStorage.setItem("projectsWorkedToday",JSON.stringify(t))),this.projectsWorkedToday=t,!0},getTimePassed(){let t=JSON.parse(localStorage.getItem("timePassed")),e=(new Date).toLocaleDateString();return t&&e==t.date||(t={date:e,time:0},localStorage.setItem("projectsWorkedToday",JSON.stringify(t))),this.timePassed=t,!0},openLinkInBrowser(t){window.open(t,"_blank")},quitApp(){m.send("close-main-app")},sendReportAnError(t){console.log(t),p.reportAnError(this,t)},applyPreference(t){console.log(t),localStorage.setItem("appPreferences",JSON.stringify(t))},saveOfflineData(){this.cloneWorkLogs.t_a_time<=600&&(this.cloneWorkLogs.t_a_time+=1),this.t_t_passed=this.timer.passed;let t=this.cloneWorkLogs.t_m_event+this.cloneWorkLogs.t_k_event,e=t/this.cloneWorkLogs.t_a_time*100;this.cloneWorkLogs.t_a_percentage=e<=100?e:100}},_=o("bc3a"),b=o.n(_),y=o("237a");const{ipcRenderer:w,remote:S}=window.require("electron"),T=window.require("log4js"),x=T.getLogger("neostaff"),j=S.app,C=window.require("path"),P=S.require("fs"),I=C.join(j.getPath("temp"),"./neoStaff_tmp");var A={async beforeRouteEnter(t,e,o){t.name&&NProgress.start();let s={};try{y["default"].CheckNetworkStatus().then(async t=>{let e=await b.a.get("user");s.user=e.data.data.user,s.selectedAccount=e.data.data.accounts[0],o(t=>t.getUserDetails(s)),localStorage.setItem("user_Offline",JSON.stringify(s.user)),localStorage.setItem("account_Offline",JSON.stringify(s.selectedAccount))},t=>{let e=localStorage.getItem("user_Offline");e&&(s.user=JSON.parse(e));let a=localStorage.getItem("account_Offline");a&&(s.selectedAccount=JSON.parse(a)),o(t=>t.getUserDetails(s))})}catch(a){x.error("Erorr while calling User and Account APIs : "+JSON.stringify(a)),ErrorHandler.render(a),localStorage.removeItem("token"),window.axios.defaults.headers.common["Authorization"]=null,o({name:"login"})}},data:i,async created(){this.allTaskStates=JSON.parse(localStorage.getItem("completedTasks"))||{},await this.getTotalWorkedToday(),await this.getProjectsWorkedToday(),await this.getTimePassed();try{y["default"].CheckNetworkStatus().then(async t=>{const e=await b.a.get(`accounts/${this.selectedAccount.id}/tasks`);if(e.data.data.length>0){e.data.data.forEach(t=>{Object.keys(this.allTaskStates).includes(t.id.toString())||(this.allTaskStates[t.id]=!1)}),localStorage.setItem("completedTasks",JSON.stringify(this.allTaskStates));const t="./projectsTasks_Offline";P.writeFile(C.join(I,t+".txt"),JSON.stringify(e.data.data),(function(t){t&&console.log(t)}))}},t=>{var e=this;P.readdir(I,(t,o)=>{if(t)return console.log("Unable to scan directory: "+t);let s=o.filter(t=>"projectsTasks_Offline.txt"==t);if(s.length>0){let t=C.join(I,s[0]);P.readFile(t,"utf8",(t,o)=>{if(t)return void console.log(o);let s=JSON.parse(o);s.forEach(t=>{Object.keys(e.allTaskStates).includes(t.id.toString())||(e.allTaskStates[t.id]=!1)}),localStorage.setItem("completedTasks",JSON.stringify(e.allTaskStates))})}})})}catch(t){console.log(t),ErrorHandler.render(t)}this.getProjects()},mounted(){this.$nextTick((function(){var t=this;w.on("main-window-data-received-fromidlepop",function(e,o){o&&"object"!==typeof o&&("activated"==o?(t.idleModeActivated=!0,console.log("idle-mode-activated!")):"de-activated"==o?(t.idleModeActivated=!1,console.log("idle-mode-activated!")):"stopInterval"==o?(t.working=!1,t.stop(),console.log("Timer stopped!")):"stopIdleReminder"==o&&(t.idleModeActivated=!1,t.working=!1,t.stop(),console.log("Idle pop reminder stopped!")))}.bind(t)),w.on("mouseevent-data",function(e,o){t.mouse_event=o,t.cloneWorkLogs.t_m_event++}.bind(t)),w.on("keyevent-data",function(e,o){t.key_event=o,t.cloneWorkLogs.t_k_event++}.bind(t))})),this._data.neoStaffAbout.appVerson=S.app.getVersion(),this._data.neoStaffAbout.appName=S.app.getName();var t=localStorage.getItem("appPreferences");t?this.preference=JSON.parse(t):localStorage.setItem("appPreferences",JSON.stringify(this.preference))},watch:r,computed:n,methods:k},L=A,N=(o("b453"),o("2877")),O=o("6544"),V=o.n(O),D=o("40dc"),E=o("8336"),W=o("b0af"),J=o("99d9"),q=o("ac7c"),M=o("cc20"),H=o("62ad"),z=o("a523"),F=o("a75b"),R=o("8fea"),U=o("169a"),B=o("ce7e"),K=o("0e8f"),Y=o("553a"),Q=o("4bd4"),G=o("132d"),X=o("adda"),Z=o("8860"),tt=o("da13"),et=o("5d23"),ot=o("34c3"),st=o("e449"),at=o("f774"),it=o("891e"),rt=o("8e36"),nt=o("0fd9"),lt=o("b974"),ct=o("8dd9"),dt=o("2fa4"),ut=o("e0c7"),pt=o("8654"),vt=o("a844"),ft=o("71d9"),mt=o("2a7f"),ht=o("3a2f"),gt=Object(N["a"])(L,s,a,!1,null,null,null);e["default"]=gt.exports;V()(gt,{VAppBar:D["a"],VBtn:E["a"],VCard:W["a"],VCardActions:J["a"],VCardText:J["b"],VCardTitle:J["c"],VCheckbox:q["a"],VChip:M["a"],VCol:H["a"],VContainer:z["a"],VContent:F["a"],VDataTable:R["a"],VDialog:U["a"],VDivider:B["a"],VFlex:K["a"],VFooter:Y["a"],VForm:Q["a"],VIcon:G["a"],VImg:X["a"],VList:Z["a"],VListItem:tt["a"],VListItemContent:et["a"],VListItemIcon:ot["a"],VListItemTitle:et["b"],VMenu:st["a"],VNavigationDrawer:at["a"],VPagination:it["a"],VProgressLinear:rt["a"],VRow:nt["a"],VSelect:lt["a"],VSheet:ct["a"],VSpacer:dt["a"],VSubheader:ut["a"],VTextField:pt["a"],VTextarea:vt["a"],VToolbar:ft["a"],VToolbarItems:mt["a"],VToolbarTitle:mt["b"],VTooltip:ht["a"]})},b453:function(t,e,o){"use strict";o("21b9")},b7f8:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-main",[o("v-container",{attrs:{fluid:""}},[o("v-row",{attrs:{justify:"center",align:"center"}},[o("v-col",{attrs:{cols:"12"}},[o("v-form",[o("v-sheet",[o("v-subheader",[t._v("You have been idle for "+t._s(t.idleTimeCount)+" minutes")]),o("v-subheader",[t._v("Project: "+t._s(!!t.selectedProject&&t.selectedProject.title))]),o("v-spacer",{staticClass:"mt-10"}),o("v-checkbox",{staticClass:"ma-0 pa-0",attrs:{label:"Keep idle time"},model:{value:t.keepIdleFlag,callback:function(e){t.keepIdleFlag=e},expression:"keepIdleFlag"}}),o("v-spacer",{staticClass:"mt-"}),o("v-card-actions",{staticClass:"ma-0 pa-0"},[o("v-col",{staticClass:"ma-0 pa-0",attrs:{align:"left"}},[o("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,a=e.attrs;return[o("v-btn",t._g(t._b({attrs:{small:"",disabled:!t.keepIdleFlag&&""}},"v-btn",a,!1),s),[t._v(" Reassign idle time ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-overlay",{attrs:{absolute:!0,value:t.busyTask}},[o("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1),o("v-card-title",{staticClass:"ma-0 pa-3"},[o("span",[t._v("Reassign idle time to")])]),o("v-card-text",{staticClass:"ma-0 pa-0"},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-select",{attrs:{dense:"",items:t.projectsList,"item-text":"title","item-value":"id",label:"Project",required:""},on:{change:t.selectProject},model:{value:t.assinedProject,callback:function(e){t.assinedProject=e},expression:"assinedProject"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-select",{attrs:{dense:"",items:t.tasksList,"item-text":"title","item-value":"id",label:"Task"},model:{value:t.assinedTask,callback:function(e){t.assinedTask=e},expression:"assinedTask"}})],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{small:"",color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v(" Cancel ")]),o("v-btn",{attrs:{small:"",color:"blue darken-1",text:""},on:{click:t.assignProject}},[t._v(" Assign ")])],1)],1)],1),o("v-dialog",{ref:"confirmDlg",staticStyle:{"{ zIndex":"200 }"},attrs:{"max-width":"400"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancelConfim(e)}},model:{value:t.confirmDialog,callback:function(e){t.confirmDialog=e},expression:"confirmDialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"grey lighten-3",dense:"",flat:""}},[o("v-toolbar-title",{staticClass:"text-body-2 font-weight-bold grey--text"},[t._v(" Confirm ")])],1),o("v-card-text",{staticClass:"pa-4 black--text"},[t._v(" Are you sure you want to cotinue without keepIdle data? ")]),o("v-card-actions",{staticClass:"pt-3"},[o("v-spacer"),o("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{small:"",color:"grey",text:""},nativeOn:{click:function(e){return t.cancelConfim(e)}}},[t._v("Cancel")]),o("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{small:"",color:"primary",outlined:""},nativeOn:{click:function(e){return t.agreeWithoutKeepIdle(e)}}},[t._v("OK")])],1)],1)],1),o("v-dialog",{ref:"stopconfirmDlg",staticStyle:{"{ zIndex":"200 }"},attrs:{"max-width":"400"},model:{value:t.stopConfirmDialog,callback:function(e){t.stopConfirmDialog=e},expression:"stopConfirmDialog"}},[o("v-card",[o("v-toolbar",{attrs:{dark:"",color:"grey lighten-3",dense:"",flat:""}},[o("v-toolbar-title",{staticClass:"text-body-2 font-weight-bold grey--text"},[t._v(" Confirm ")])],1),o("v-card-text",{staticClass:"pa-4 black--text"},[t._v(" Do you want to stop idle reminder? ")]),o("v-card-actions",{staticClass:"pt-3"},[o("v-spacer"),o("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{small:"",color:"grey",text:""},nativeOn:{click:function(e){return t.stop(e)}}},[t._v("No")]),o("v-btn",{staticClass:"body-2 font-weight-bold",attrs:{small:"",color:"primary",outlined:""},nativeOn:{click:function(e){return t.neverReminderForIdle(e)}}},[t._v("Yes")])],1)],1)],1)],1),o("v-col",{staticClass:"ma-0 pa-0",attrs:{align:"right"}},[o("v-btn",{staticClass:"mx-1",attrs:{small:"",color:"normal",depressed:"",disabled:!!t.keepIdleFlag&&""},on:{click:t.stopInterval}},[t._v("Stop")]),o("v-btn",{staticClass:"mx-1",attrs:{small:"",color:"normal",depressed:""},on:{click:t.continueInterval}},[t._v("Continue")])],1)],1)],1)],1)],1)],1)],1)],1)},a=[],i=function(){let t=JSON.parse(localStorage.getItem("runningPojects"));return t.assinedProject={},t.assinedTask={},t.busyTask=!1,t.idleTimeCount=0,t.keepIdleFlag=!1,t.dialog=!1,t.confirmDialog=!1,t.stopConfirmDialog=!1,t.assignProjectData={},t},r={},n={},l=o("7dcd");const c=window.require("log4js"),d=c.getLogger("neostaff"),{remote:u,ipcRenderer:p}=window.require("electron");var v={stopInterval(){this.stopConfirmDialog=!0,d.info("Stop button called without keepdata")},continueInterval(){this.keepIdleFlag?(d.info("Continue button called with keepdata"),p.send("idle-window-send-data","keepIdleDataContinue"),this.common()):null!=this.assignProjectData?(d.info("Continue button called with project assigned"),p.send("idle-window-send-data",data),this.common()):(d.info("Are you sure you want to cotinue without keepIdle data?"),this.confirmDialog=!0)},selectProject(t){this.busyTask=!0,this.getTasks(t)},getTasks(t){l["a"].tasks(this,t)},assignProject(){this.assignProjectData={selectedProjectId:this.assinedProject,selectedTaskId:this.assinedTask},this.dialog=!1},common(){p.send("idle-window-send-data","de-activated"),u.getCurrentWindow().close()},cancelConfim(){this.confirmDialog=!1},agreeWithoutKeepIdle(){this.confirmDialog=!1,p.send("idle-window-send-data","continueIntervalWithoutKeepData"),d.info("use agreed without KeepIdle data"),this.common()},neverReminderForIdle(){d.info("User has stopped idle reminder"),p.send("idle-window-send-data","stopIdleReminder"),this.common()},stop(){d.info("User has stopped idle interval"),p.send("idle-window-send-data","stopInterval"),this.common()}};o("bc3a");const{ipcRenderer:f}=window.require("electron");var m={data:i,mounted(){f.send("idle-window-send-data","activated"),this.$nextTick((function(){var t=this;f.on("popidleTime-update",function(e,o){console.log("popideltime : ",o),t.idleTimeCount=o}.bind(t))}))},watch:r,computed:n,methods:v},h=m,g=(o("aef0"),o("2877")),k=o("6544"),_=o.n(k),b=o("8336"),y=o("b0af"),w=o("99d9"),S=o("ac7c"),T=o("62ad"),x=o("a523"),j=o("169a"),C=o("4bd4"),P=o("f6c4"),I=o("a797"),A=o("490a"),L=o("0fd9"),N=o("b974"),O=o("8dd9"),V=o("2fa4"),D=o("e0c7"),E=o("71d9"),W=o("2a7f"),J=Object(g["a"])(h,s,a,!1,null,null,null);e["default"]=J.exports;_()(J,{VBtn:b["a"],VCard:y["a"],VCardActions:w["a"],VCardText:w["b"],VCardTitle:w["c"],VCheckbox:S["a"],VCol:T["a"],VContainer:x["a"],VDialog:j["a"],VForm:C["a"],VMain:P["a"],VOverlay:I["a"],VProgressCircular:A["a"],VRow:L["a"],VSelect:N["a"],VSheet:O["a"],VSpacer:V["a"],VSubheader:D["a"],VToolbar:E["a"],VToolbarTitle:W["b"]})},d8dd:function(t,e,o){"use strict";o("9a92")}});
//# sourceMappingURL=app.878f8e58.js.map